/* * ATM Example system - file CardReader.java * * copyright (c) 2001 - Russell C. Bjork * */package edu.gordon.atm.physical;import org.apache.log4j.LogManager;import org.apache.log4j.Logger;import edu.gordon.banking.Card;/** * Manager for the ATM's card reader. In a real ATM, this would manage a * physical device; in this edu.gordon.simulation, it uses classes in package * edu.gordon.simulation to simulate the device. */public class CardReader {	private static Logger logger = LogManager.getLogger(CardReader.class.getName());	/**	 * Inserted card	 */	private Card card;	// In a real ATM, code would be needed to sense insertion of a card into the	// slot and notify the ATM - simulated in this case by a button in the GUI		/**	 * Insert a card into the reader	 * @param cardNumber	 */	public void insertCard(int cardNumber){		if(!cardInserted()) {			if (cardNumber > 0) {				logger.info(String.format("insert the card #%d", cardNumber));				card = new Card(cardNumber);			} else {				logger.warn("can't insert a invalid card");				card = null;			}		} else {			logger.warn("has already a card inside");		}	}		/**	 * Read a card that has been partially inserted into the reader	 *	 * @return Card object representing information on the card if inserted	 *         successfully, null if not	 */	public Card readCard(){		if(cardInserted()){			logger.info(String.format("read the card #%d", card.getNumber()));			return card;		} else {			logger.info("try to read a card but no card was found");			return null;		}	}	/**	 * Eject the card that is currently inside the reader.	 */	public void ejectCard() {		if (cardInserted()) {			logger.info(String.format("eject the card #%d", card.getNumber()));			card = null;		} else {			logger.warn("try to eject the card but no card was found");		}	}	/**	 * Retain the card that is currently inside the reader for action by the	 * bank.	 */	public void retainCard() {		if(cardInserted()){			logger.info(String.format("retain the card #%d", card.getNumber()));			// TODO - What should be done here?!		} else {			logger.warn("try to retain the card but no card was found");		}	}		/**	 * Return true if a card is inserted	 * @return card is inserted?	 */	public boolean cardInserted(){		return card != null;	}}